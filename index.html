<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Ghosie的博客 - 记录学习的技能和遇到的问题</title><meta name="keywords" content="javascript,vue,css,html,阅读，生活"><meta name="author" content="郭伟杰"><meta name="copyright" content="郭伟杰"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="html5,css3,javascript,vue3 学习笔记，阅读心得，生活感悟">
<meta property="og:type" content="website">
<meta property="og:title" content="Ghosie的博客">
<meta property="og:url" content="https://keep-silence.com/index.html">
<meta property="og:site_name" content="Ghosie的博客">
<meta property="og:description" content="html5,css3,javascript,vue3 学习笔记，阅读心得，生活感悟">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://keep-silence.com/img/avatar.jpg">
<meta property="article:author" content="郭伟杰">
<meta property="article:tag" content="javascript,vue,css,html,阅读，生活">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://keep-silence.com/img/avatar.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://keep-silence.com/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://fastly.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://fastly.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Ghosie的博客',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-02-09 13:15:53'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">41</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">37</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 目录</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/myHtml/on2job.html"><i class="fa-fw fas fa-gamepad"></i><span> 摸鱼</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://win11.keep-silence.com"><i class="fa-fw fab fa-windows"></i><span> win11</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/home_page.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Ghosie的博客</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 目录</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/myHtml/on2job.html"><i class="fa-fw fas fa-gamepad"></i><span> 摸鱼</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://win11.keep-silence.com"><i class="fa-fw fab fa-windows"></i><span> win11</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Ghosie的博客</h1><div id="site_social_icons"><a class="social-icon" href="https://github.com/guo-weijie" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:weijie.g@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/gossip/leisureFun/" title="闲趣"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/top_default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="闲趣"></a></div><div class="recent-post-info"><a class="article-title" href="/gossip/leisureFun/" title="闲趣">闲趣</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-01-19T02:28:51.000Z" title="发表于 2024-01-19 10:28:51">2024-01-19</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-19T03:10:34.804Z" title="更新于 2024-01-19 11:10:34">2024-01-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%85%B6%E4%BB%96/">其他</a></span></div><div class="content">A安得广厦千万间，使我不得开心颜
C采菊东篱下，莫道不消魂
垂死病中惊坐起，笑问客从何处来
垂死病中惊坐起，夜深还过女墙来
垂死病中惊坐起，笑问客从何处来
垂死病中惊坐起，一枝红杏出墙来
春宵一刻值千金，绝知此事要躬行
D东风不与周郎便，遍插茱萸少一人
多情自古空余恨，此恨绵绵无绝期
但使龙城飞将在，从此君王不早朝
E而今才道当时错，当时只道是寻常
F返景入森林，空翠湿人衣
G过尽千帆皆不是，蓦然回首，那人却在，灯火阑珊处
H后宫佳丽三千人，铁杵磨成绣花针
J京中有善口技者，从此君王不早朝
江湖夜雨十年灯，路上行人欲断魂
K可怜身上衣正单，将登太行雪满山
L老妪力虽衰，波撼岳阳城
老夫聊发少年狂，日啖荔枝三百颗
凉风起天末，万里故乡情
M莫愁前路无知己，西出阳关无故人
N男儿当自强，对镜贴花黄
南去北来人自老，桃花依旧笑春风
Q劝君更进一杯酒，偷得浮生半日闲
劝君更进一杯酒，至今遗恨水潺潺
清风明月本无价，近水远山皆有情
R人闲桂花落，天寒红叶稀
S少小离家老大回，安能辨我是雄雌
T天堂有路你不走，学海无涯苦作舟
W问君能有几多愁？才下眉头，却上心头
我寄愁心与明月，明月何时照我还
我 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/javascript/gc4-24/" title="第二十四章 网络请求与远程资源"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/javascriptApi_cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="第二十四章 网络请求与远程资源"></a></div><div class="recent-post-info"><a class="article-title" href="/javascript/gc4-24/" title="第二十四章 网络请求与远程资源">第二十四章 网络请求与远程资源</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-12-20T07:26:32.000Z" title="发表于 2023-12-20 15:26:32">2023-12-20</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-12-26T02:41:04.944Z" title="更新于 2023-12-26 10:41:04">2023-12-26</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/javascript/">javascript</a></span></div><div class="content">跨源资源共享跨源资源共享（CORS：Cross-Origin Resource Sharing）定义了浏览器与服务器如何实现跨源通信。CORS 背后的基本思路就是使用自定义的 HTTP 头部允许浏览器和服务器相互了解，以确实请求或响应应该成功还是失败
预检请求CORS 通过预检请求（preflighted request）的服务器验证机制，允许使用自定义头部、除 GET 和 POST 之外的方法，以及不同请求体内容类型。在要发送涉及上述某种高级选项的请求时，会先向服务器发送一个“预检”请求。这个请求使用 OPTIONS 方法发送并包含以下头部：

Origin：发送请求的页面的源（协议、域名、端口）
Access-Control-Request-Method：请求希望使用的方法
Access-Control-Request-Headers：（可选）自定义头部列表，多个使用逗号分隔

在这个请求发送后，服务器可以确定是否允许这种类型的请求。服务器通过在响应中发送如下头部与浏览器沟通信息：

Access-Control-Allow-Origin：发送请求的页面的源（协议、域名、端口）
A ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/node/mongooseNode/" title="mongoose 中文"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/top_default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="mongoose 中文"></a></div><div class="recent-post-info"><a class="article-title" href="/node/mongooseNode/" title="mongoose 中文">mongoose 中文</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-12-13T07:57:35.000Z" title="发表于 2023-12-13 15:57:35">2023-12-13</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-12-14T06:11:30.105Z" title="更新于 2023-12-14 14:11:30">2023-12-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Node/">Node</a></span></div><div class="content">
学习中遇到的 mongoose 有的没有中文文档，自己翻译记录，如有讹误，望不吝赐教根据 v7.6.7 官方文档翻译

APIModel
Model.findByIdAndUpdate()

</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/node/nodejsStudyNote/" title="nodejs 学习笔记"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/node_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="nodejs 学习笔记"></a></div><div class="recent-post-info"><a class="article-title" href="/node/nodejsStudyNote/" title="nodejs 学习笔记">nodejs 学习笔记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-07-14T13:32:23.000Z" title="发表于 2023-07-14 21:32:23">2023-07-14</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-12-13T08:00:37.678Z" title="更新于 2023-12-13 16:00:37">2023-12-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Node/">Node</a></span></div><div class="content">Stream 流
Stream 是一个抽象接口，Node 中有很多对象实现了这个接口。例如，对 http 服务器发起请求的 request 对象就是一个 Stream，还有 stdout（标准输出）

Node.js Stream 有四种流类型：

Readable - 可读操作
Writable - 可写操作
Duplex - 可读可写操作
Transform - 操作被写入数据，然后读出结果

所有的 Stream 对象都是 EventEmitter 的实例。常用的事件有：

data - 当有数据可读时触发
end - 没有更多的数据可读时触发
error - 在接收和写入过程中发生错误时触发
finish - 所有数据已被写入到底层系统时触发

模块机制Node 的模块实现在 Node 中引入模块，需要经历一下 3 个步骤：

路径分析
文件定位
编译执行

在 Node 中，模块分为两类：一类是 Node 提供的模块，称为核心模块；另一类是用户编写的模块，称为文件模块

核心模块部分在 Node 源代码的编译过程中，编译进了二进制执行文件。在 Node 进程启动时，部分核心模 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/javascript/gc4-20/" title="第二十章 JavaScript API"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/javascriptApi_cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="第二十章 JavaScript API"></a></div><div class="recent-post-info"><a class="article-title" href="/javascript/gc4-20/" title="第二十章 JavaScript API">第二十章 JavaScript API</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-11-04T01:03:17.000Z" title="发表于 2022-11-04 09:03:17">2022-11-04</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-25T07:40:21.648Z" title="更新于 2024-01-25 15:40:21">2024-01-25</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/javascript/">javascript</a></span></div><div class="content">Atomics 与 SharedArrayBuffer多个上下文访问 SharedArrayBuffer 时，如果同时对缓冲区执行操作，就可能出现资源争用问题。Atomics API 通过强制同一时刻只能对缓冲区执行一个操作，可以让多个上下文安全地读写一个 SharedArrayBuffer。
Atomics 不是构造函数，因此不能使用 new 操作符调用，也不能将其当作函数直接调用。Atomics 的所有属性和方法都是静态的（与 Math 对象一样）
跨上下文消息跨文档消息有时候也简称为 XDM（cross-document messaging），是一种在不同执行上下文（如不同工作线程或不同源的页面）间传递信息的能力
XDM 的核心是 postMessage() 方法
postMessage() 方法接收3个参数：消息、表示目标接收源的字符串和可选的可传输对象的数组（只与工作线程相关）
接收到 XDM 的消息后，window 对象上会触发 message 事件，这个事件是异步触发的，因此从消息发出到接收到消息可能有延迟。传给 onmessage 事件处理程序的 event 对象包含以 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/javascript/array/" title="Array 原型方法"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/top_default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Array 原型方法"></a></div><div class="recent-post-info"><a class="article-title" href="/javascript/array/" title="Array 原型方法">Array 原型方法</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-10-24T07:06:17.000Z" title="发表于 2022-10-24 15:06:17">2022-10-24</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-08-24T00:55:46.170Z" title="更新于 2023-08-24 08:55:46">2023-08-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/javascript/">javascript</a></span></div><div class="content">Array.prototype.at()
方法接收一个整数值并返回该索引对应的元素，允许正数和负数。负整数从数组中的最后一个元素开始倒数

语法1ary.at(index)

参数index：要返回的数组元素的索引。传递负数时，返回的元素将从数组的末端开始倒数
返回值参数索引对应的值。如果找不到指定的索引，则返回 undefined
描述在传递非负数时，at()方法等价于中括号表示法，例如ary[0]和ary.at(0)均返回第一个元素；当索引小于0时，该方法将访问索引index + ary.length
at()方法是通用的，仅需要this具有length属性和以整数为键的属性
示例获取数组中倒数第二个元素的不同方法。虽然示例中所有的方法都是可行的，但是at()方法更加简洁和可读
12345678910const colors = [&#x27;red&#x27;, &#x27;green&#x27;, &#x27;blue&#x27;]// 使用 length 获取colors[colors.length-2] // &#x27;green&#x27;// 使用 slice() 方 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/javascript/gc4-11/" title="第十一章 Promise 与异步函数"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/top_default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="第十一章 Promise 与异步函数"></a></div><div class="recent-post-info"><a class="article-title" href="/javascript/gc4-11/" title="第十一章 Promise 与异步函数">第十一章 Promise 与异步函数</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-10-17T07:09:51.000Z" title="发表于 2022-10-17 15:09:51">2022-10-17</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-20T22:55:00.000Z" title="更新于 2023-03-21 06:55:00">2023-03-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/javascript/">javascript</a></span></div><div class="content">Promise
Promise 是 ES6 新增的引用类型，可以通过 new 操作符来实例化。创建新 promise 时需要传入函数作为参数

promise 基础promise 是一个有状态的对象，可以处于以下3种状态之一：

待定（pending）
兑现（fulfilled，有时也称为“解决”，resolved）
拒绝（rejected）

promise 状态落定后不能再修改，即状态不可逆promise 状态是私有的，不能直接通过 JavaScript 检测到，也不能被外部 JavaScript 代码修改
每个 promise 只要状态落定，就会有一个私有的内部值，该值包含原始值或对象的不可修改的引用。默认值为 undefined。

控制 promise 状态的转换是通过调用它的两个函数参数实现的。这两个参数通常被命名为 resolve() 和 reject()。调用 resolve() 会把状态切换为兑现，调用 reject() 会把状态切换为拒绝，同时会抛出错误
为避免 promise 卡在待定状态，可以添加一个定时退出功能
1234let p = new Promise( ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/javascript/gc4-10/" title="第十章 函数"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/function_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="第十章 函数"></a></div><div class="recent-post-info"><a class="article-title" href="/javascript/gc4-10/" title="第十章 函数">第十章 函数</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-08-30T03:51:03.000Z" title="发表于 2022-08-30 11:51:03">2022-08-30</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-20T22:55:00.000Z" title="更新于 2023-03-21 06:55:00">2023-03-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/javascript/">javascript</a></span></div><div class="content">
函数实际上是对象。每个函数都是 Function 类型的实例，而 Function 也有属性和方法，跟其他引用类型一样。因为函数是对象，所以函数名就是指向函数对象的指针，而且不一定与函数本身紧密绑定

定义函数的方式
函数表达式

123let sum = function(num1, num2)&#123;  return num1 + num2&#125;;  // 函数表达式与任何变量初始化语句一样，末尾要有分号


箭头函数

12345let sum = (num1, num2) =&gt; &#123;  return mun1 + num2&#125;;  // 函数表达式与任何变量初始化语句一样，末尾要有分号&lt;!-- 箭头函数不能使用 arguments、super 和 new.target，也不能用作构造函数，也没有 prototype 属性 --&gt;


函数声明

123function sum(num1, num2)&#123;  return num1 + num2&#125; // 函数定义最后没有分号


使用构造函数（不推荐）

1let s ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/others/svg/" title="svg"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/svg_cover.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="svg"></a></div><div class="recent-post-info"><a class="article-title" href="/others/svg/" title="svg">svg</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-27T11:58:16.000Z" title="发表于 2022-06-27 19:58:16">2022-06-27</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-20T22:56:00.000Z" title="更新于 2023-03-21 06:56:00">2023-03-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%85%B6%E4%BB%96/">其他</a></span></div><div class="content">基本结构一个简单示例：
123456789101112&lt;svg version=&quot;1.1&quot;     baseProfile=&quot;full&quot;     width=&quot;300&quot; height=&quot;200&quot;     xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;  &lt;rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;red&quot; /&gt;  &lt;circle cx=&quot;150&quot; cy=&quot;100&quot; r=&quot;80&quot; fill=&quot;green&quot; /&gt;  &lt;text x=&quot;150&quot; y=&quot;125&quot; font-size=&quot;60&quot; text-anchor=&quot;middle&quot; fill=&quot;white&quot;&g ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/javascript/operatorPrecedence/" title="运算符优先级"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/operator.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="运算符优先级"></a></div><div class="recent-post-info"><a class="article-title" href="/javascript/operatorPrecedence/" title="运算符优先级">运算符优先级</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-27T06:28:04.000Z" title="发表于 2022-06-27 14:28:04">2022-06-27</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-20T22:55:00.000Z" title="更新于 2023-03-21 06:55:00">2023-03-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/javascript/">javascript</a></span></div><div class="content">结合性左结合：相当于把左边的子表达式加上小括号右结合：相当于把右边的子表达式加上小括号
1233+10*2 // 23(3+10)*2 // 26 -&gt; 左结合3+(10*2) // 23 这里的括号是多余的 -&gt; 右结合

赋值运算符是右结合的，所以可以像下面这样写
1a = b = 5 // 相当于 a = ( b = 5 )

分组和短路在下表中，分组具有最高优先级，然而，这并不意味着总是优先对分组内的表达式进行求值，尤其是涉及短路时
常见短路例子如下：



代码示例
说明



a || (b * c)
首先对 a 求值，如果 a 为真值则直接返回 a


a &amp;&amp; (b &lt; c)
首先对 a 求值，如果 a 为虚值则直接返回 a


a ?? (b || c)
首先对 a 求值，如果 a 不是 null 或 undefined 则直接返回 a


a?.b.c
首先对 a  求值，如果 a 是 null 或 undefined 则直接返回 undefined


123 &gt; 2 &amp;&amp; 2 &gt; 1 // true3 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/#content-inner">5</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">郭伟杰</div><div class="author-info__description">尽吾志也而不能至者，可以无悔矣</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">41</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">37</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/guo-weijie"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/guo-weijie" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:weijie.g@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">少壮不努力，老大徒伤悲 <br /> 君何必言利，亦有仁义焉 <br /> 一切古代史都是当代史 <br /> 每天进步一点点</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/node/multiVersionNode/" title="电脑安装多版本nodejs"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/node_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="电脑安装多版本nodejs"/></a><div class="content"><a class="title" href="/node/multiVersionNode/" title="电脑安装多版本nodejs">电脑安装多版本nodejs</a><time datetime="2024-01-31T02:03:45.414Z" title="更新于 2024-01-31 10:03:45">2024-01-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/javascript/gc4-20/" title="第二十章 JavaScript API"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/javascriptApi_cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="第二十章 JavaScript API"/></a><div class="content"><a class="title" href="/javascript/gc4-20/" title="第二十章 JavaScript API">第二十章 JavaScript API</a><time datetime="2024-01-25T07:40:21.648Z" title="更新于 2024-01-25 15:40:21">2024-01-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/gossip/leisureFun/" title="闲趣"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/top_default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="闲趣"/></a><div class="content"><a class="title" href="/gossip/leisureFun/" title="闲趣">闲趣</a><time datetime="2024-01-19T03:10:34.804Z" title="更新于 2024-01-19 11:10:34">2024-01-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/hello-world/" title="我的个人博客"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://tse2-mm.cn.bing.net/th/id/OIP-C.oJhIk6rqwTr2inf7MI5HJgHaHa?pid=ImgDet&amp;rs=1" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="我的个人博客"/></a><div class="content"><a class="title" href="/hello-world/" title="我的个人博客">我的个人博客</a><time datetime="2024-01-19T02:29:07.436Z" title="更新于 2024-01-19 10:29:07">2024-01-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/gossip/babble/" title="呓语"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/babble_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="呓语"/></a><div class="content"><a class="title" href="/gossip/babble/" title="呓语">呓语</a><time datetime="2024-01-04T07:56:57.157Z" title="更新于 2024-01-04 15:56:57">2024-01-04</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Node/"><span class="card-category-list-name">Node</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/css/"><span class="card-category-list-name">css</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/html/"><span class="card-category-list-name">html</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/javascript/"><span class="card-category-list-name">javascript</span><span class="card-category-list-count">13</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/vue/"><span class="card-category-list-name">vue</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%85%B6%E4%BB%96/"><span class="card-category-list-name">其他</span><span class="card-category-list-count">8</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%9D%82%E8%B0%88/"><span class="card-category-list-name">杂谈</span><span class="card-category-list-count">7</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Sass/" style="font-size: 1.1em; color: #999">Sass</a> <a href="/tags/Scss/" style="font-size: 1.1em; color: #999">Scss</a> <a href="/tags/android/" style="font-size: 1.1em; color: #999">android</a> <a href="/tags/bug/" style="font-size: 1.1em; color: #999">bug</a> <a href="/tags/css/" style="font-size: 1.33em; color: #99a2af">css</a> <a href="/tags/css3/" style="font-size: 1.27em; color: #99a0a9">css3</a> <a href="/tags/git/" style="font-size: 1.16em; color: #999b9e">git</a> <a href="/tags/grid/" style="font-size: 1.1em; color: #999">grid</a> <a href="/tags/html/" style="font-size: 1.16em; color: #999b9e">html</a> <a href="/tags/html5/" style="font-size: 1.16em; color: #999b9e">html5</a> <a href="/tags/javascript/" style="font-size: 1.5em; color: #99a9bf">javascript</a> <a href="/tags/localStorage/" style="font-size: 1.1em; color: #999">localStorage</a> <a href="/tags/mongoose/" style="font-size: 1.1em; color: #999">mongoose</a> <a href="/tags/nodejs/" style="font-size: 1.21em; color: #999ea4">nodejs</a> <a href="/tags/npm/" style="font-size: 1.21em; color: #999ea4">npm</a> <a href="/tags/nth/" style="font-size: 1.1em; color: #999">nth</a> <a href="/tags/object/" style="font-size: 1.1em; color: #999">object</a> <a href="/tags/sessionStorage/" style="font-size: 1.1em; color: #999">sessionStorage</a> <a href="/tags/svg/" style="font-size: 1.1em; color: #999">svg</a> <a href="/tags/uniapp/" style="font-size: 1.1em; color: #999">uniapp</a> <a href="/tags/vue/" style="font-size: 1.16em; color: #999b9e">vue</a> <a href="/tags/vue3-0/" style="font-size: 1.1em; color: #999">vue3.0</a> <a href="/tags/windows/" style="font-size: 1.16em; color: #999b9e">windows</a> <a href="/tags/%E4%BC%A0%E7%BB%9F%E6%96%87%E5%8C%96/" style="font-size: 1.21em; color: #999ea4">传统文化</a> <a href="/tags/%E5%8D%A1%E9%A1%BF/" style="font-size: 1.1em; color: #999">卡顿</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 1.1em; color: #999">小程序</a> <a href="/tags/%E6%A2%A6%E8%AF%9D/" style="font-size: 1.1em; color: #999">梦话</a> <a href="/tags/%E6%B1%9F%E6%B9%96/" style="font-size: 1.16em; color: #999b9e">江湖</a> <a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 1.39em; color: #99a4b4">生活</a> <a href="/tags/%E7%94%B5%E5%8A%9B/" style="font-size: 1.1em; color: #999">电力</a> <a href="/tags/%E7%94%B5%E8%83%BD%E9%87%8F%E8%AE%A1%E9%87%8F/" style="font-size: 1.1em; color: #999">电能量计量</a> <a href="/tags/%E7%A5%9E%E7%A7%98/" style="font-size: 1.1em; color: #999">神秘</a> <a href="/tags/%E8%B6%85%E8%87%AA%E7%84%B6/" style="font-size: 1.1em; color: #999">超自然</a> <a href="/tags/%E8%BF%B7%E4%BF%A1/" style="font-size: 1.1em; color: #999">迷信</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 1.16em; color: #999b9e">随笔</a> <a href="/tags/%E9%A3%8E%E4%BF%97/" style="font-size: 1.1em; color: #999">风俗</a> <a href="/tags/%E9%AB%98%E7%A8%8B4%E7%AC%94%E8%AE%B0/" style="font-size: 1.44em; color: #99a7ba">高程4笔记</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">十一月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">十月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/08/"><span class="card-archive-list-date">八月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/06/"><span class="card-archive-list-date">六月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><span class="card-archive-list-count">3</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">41</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-02-09T05:15:53.340Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 郭伟杰</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a target="_blank" rel="noopener" href='https://cn.keep-silence.com'>国内访问</a>  <a href='https://keep-silence.com'>国外访问</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://fastly.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://fastly.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>